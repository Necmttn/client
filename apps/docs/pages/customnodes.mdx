import { Callout } from 'nextra-theme-docs';

You can easily extend the base Node list by creating your own custom nodes.

Nodes consist of 3 parts: `id`, a `schema` consisting of an `input` and `output`, and an `action`.

<Callout>
The schema must be defined with `zod`.
</Callout>

## Example

Here is an example of the "simple text modification" Node:

```ts index.ts
import { z } from 'zod';

const inputSchema = z.object({
  text: z.string().or(z.array(z.string())),
  modifier: z.string(),
});

const outputSchema = z.object({
  text: z.string(),
});

async function action(input: z.input<typeof inputSchema>): Promise<z.infer<typeof outputSchema>> {
  // Ensure that the input is valid and complete the input with default values.
  const payload = inputSchema.parse(input);
  return {
    text: payload.modifier.replace(
      /\$\(text\)\$/gm,
      Array.isArray(payload.text) ? payload.text.join(', ') : payload.text
    ),
  };
}

export const simpleModificationNode = {
	id: 'text.modify.simple',
	schema: {
		input: inputSchema,
		output: outputSchema,
	},
	action,
};

```

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Required</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>string</td>
      <td>Yes</td>
      <td>A unique identifier of the Node.</td>
    </tr>
    <tr>
      <td>schema.input</td>
      <td>A `Zod` schema. Must be of type `z.object`.</td>
      <td>Yes</td>
      <td>The input of the Node.</td>
    </tr>
    <tr>
      <td>schema.output</td>
      <td>A `Zod` schema. Must be of type `z.object` or `z.instanceOf(ReadableStream)`.</td>
      <td>Yes</td>
      <td>The output of the Node.</td>
    </tr>
    <tr>
      <td>action</td>
      <td>`function (input: z.input<typeof inputSchema>, apiKeys: APIKeys): Promise<z.infer<typeof outputSchema>> {}`</td>
      <td>Yes</td>
      <td>A function that receives an `input` object (defined by `schema.input`) and `apiKeys`, a `Record<string, string>` that contains all API Keys that were passed into the Aigur Client instance.</td>
    </tr>
  </tbody>
</table>